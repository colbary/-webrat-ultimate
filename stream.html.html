<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé• –°—Ç—Ä–∏–º–∏–Ω–≥ WEBRAT</title>
    <style>
        body { 
            background: #000; 
            color: #0f0; 
            font-family: monospace;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            background: rgba(0, 50, 0, 0.8);
            padding: 15px;
            text-align: center;
            border-bottom: 3px solid #0f0;
            margin-bottom: 20px;
        }
        
        .stream-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stream-box {
            background: #111;
            border: 2px solid #0f0;
            border-radius: 10px;
            padding: 15px;
            position: relative;
        }
        
        .stream-title {
            color: #0f0;
            font-size: 1.5rem;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .video-placeholder {
            width: 100%;
            height: 300px;
            background: #000;
            border: 1px solid #0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #0a0;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: monospace;
            flex: 1;
            min-width: 120px;
        }
        
        .control-btn:hover {
            background: #0f0;
        }
        
        .control-btn.danger {
            background: #a00;
        }
        
        .control-btn.danger:hover {
            background: #f00;
        }
        
        .logs {
            background: #111;
            border: 1px solid #0f0;
            padding: 15px;
            margin-top: 20px;
            height: 200px;
            overflow-y: auto;
            font-size: 0.9rem;
        }
        
        .log-entry {
            border-bottom: 1px solid #333;
            padding: 5px 0;
        }
        
        .log-time {
            color: #0f0;
        }
        
        .log-message {
            color: #fff;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è */
        @keyframes connecting {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .connecting {
            animation: connecting 1s infinite;
            color: #ff0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé• WEBRAT –°–¢–†–ò–ú–ò–ù–ì –°–ò–°–¢–ï–ú–´</h1>
        <p>–ü—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∞ | –ó–∞–ø–∏—Å—å | –°–∫—Ä–∏–Ω—à–æ—Ç—ã</p>
    </div>
    
    <div class="stream-container">
        <!-- –í–µ–±-–∫–∞–º–µ—Ä–∞ -->
        <div class="stream-box">
            <h2 class="stream-title">üì∑ –í–ï–ë-–ö–ê–ú–ï–†–ê</h2>
            <div class="video-placeholder" id="webcamStream">
                <div class="connecting">üîÑ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –í–ï–ë-–ö–ê–ú–ï–†–ï...</div>
            </div>
            <div class="controls">
                <button class="control-btn" onclick="startWebcam()">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç —Å—Ç—Ä–∏–º–∞</button>
                <button class="control-btn" onclick="captureWebcam()">üì∏ –°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫</button>
                <button class="control-btn" onclick="recordWebcam()">‚è∫Ô∏è –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
                <button class="control-btn danger" onclick="stopWebcam()">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
        </div>
        
        <!-- –ú–æ–Ω–∏—Ç–æ—Ä -->
        <div class="stream-box">
            <h2 class="stream-title">üñ•Ô∏è –≠–ö–†–ê–ù –ú–û–ù–ò–¢–û–†–ê</h2>
            <div class="video-placeholder" id="screenStream">
                <div class="connecting">üîÑ –ó–ê–•–í–ê–¢ –≠–ö–†–ê–ù–ê...</div>
            </div>
            <div class="controls">
                <button class="control-btn" onclick="startScreenShare()">‚ñ∂Ô∏è –ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞</button>
                <button class="control-btn" onclick="captureScreen()">üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                <button class="control-btn" onclick="recordScreen()">‚è∫Ô∏è –ó–∞–ø–∏—Å—å —ç–∫—Ä–∞–Ω–∞</button>
                <button class="control-btn danger" onclick="stopScreenShare()">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
        </div>
    </div>
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 30px 0;">
        <button class="control-btn" onclick="toggleWebcamLight()">üí° –í–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç –∫–∞–º–µ—Ä—ã</button>
        <button class="control-btn" onclick="takeSecretPhoto()">üïµÔ∏è –°–∫—Ä—ã—Ç—ã–π —Å–Ω–∏–º–æ–∫</button>
        <button class="control-btn" onclick="streamAudio()">üé§ –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ</button>
        <button class="control-btn danger" onclick="disableWebcam()">üö´ –û—Ç–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É</button>
    </div>
    
    <!-- –õ–æ–≥–∏ -->
    <div class="stream-box">
        <h2 class="stream-title">üìä –õ–û–ì–ò –°–¢–†–ò–ú–ò–ù–ì–ê</h2>
        <div class="logs" id="streamLogs">
            <div class="log-entry">
                <span class="log-time">[12:00:00]</span>
                <span class="log-message"> –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞</span>
            </div>
        </div>
    </div>
    
    <script>
        let webcamStream = null;
        let screenStream = null;
        let mediaRecorder = null;
        let recordedChunks = [];
        let logs = [];
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–æ–≤
        function addLog(message) {
            const now = new Date();
            const time = `[${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}]`;
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `<span class="log-time">${time}</span><span class="log-message"> ${message}</span>`;
            document.getElementById('streamLogs').prepend(logEntry);
            logs.push(`${time} ${message}`);
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤
            if (logs.length > 50) {
                logs.shift();
                const entries = document.querySelectorAll('.log-entry');
                if (entries.length > 50) {
                    entries[entries.length - 1].remove();
                }
            }
        }
        
        // –í–µ–±-–∫–∞–º–µ—Ä–∞
        async function startWebcam() {
            try {
                addLog('–ó–∞–ø—É—Å–∫ –≤–µ–±-–∫–∞–º–µ—Ä—ã...');
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { width: 1280, height: 720 },
                    audio: true 
                });
                
                webcamStream = stream;
                const videoElement = document.createElement('video');
                videoElement.srcObject = stream;
                videoElement.autoplay = true;
                videoElement.style.width = '100%';
                videoElement.style.height = '100%';
                
                const placeholder = document.getElementById('webcamStream');
                placeholder.innerHTML = '';
                placeholder.appendChild(videoElement);
                
                addLog('–í–µ–±-–∫–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
            } catch (error) {
                addLog(`–û—à–∏–±–∫–∞ –∫–∞–º–µ—Ä—ã: ${error.message}`);
                document.getElementById('webcamStream').innerHTML = '‚ùå –î–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∑–∞–ø—Ä–µ—â–µ–Ω';
            }
        }
        
        // –ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞
        async function startScreenShare() {
            try {
                addLog('–ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞...');
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: { cursor: "always" },
                    audio: true
                });
                
                screenStream = stream;
                const videoElement = document.createElement('video');
                videoElement.srcObject = stream;
                videoElement.autoplay = true;
                videoElement.style.width = '100%';
                videoElement.style.height = '100%';
                
                const placeholder = document.getElementById('screenStream');
                placeholder.innerHTML = '';
                placeholder.appendChild(videoElement);
                
                addLog('–≠–∫—Ä–∞–Ω –∑–∞—Ö–≤–∞—á–µ–Ω');
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
                stream.getVideoTracks()[0].addEventListener('ended', () => {
                    addLog('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–æ–≤–∏–ª –∑–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞');
                    stopScreenShare();
                });
            } catch (error) {
                addLog(`–û—à–∏–±–∫–∞ –∑–∞—Ö–≤–∞—Ç–∞ —ç–∫—Ä–∞–Ω–∞: ${error.message}`);
            }
        }
        
        // –°–Ω–∏–º–æ–∫ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã
        function captureWebcam() {
            if (!webcamStream) {
                addLog('–í–µ–±-–∫–∞–º–µ—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞');
                return;
            }
            
            const canvas = document.createElement('canvas');
            const video = document.querySelector('#webcamStream video');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            
            const link = document.createElement('a');
            link.download = `webcam-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            addLog('–°–Ω–∏–º–æ–∫ —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }
        
        // –°–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞
        function captureScreen() {
            if (!screenStream) {
                addLog('–ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω');
                return;
            }
            
            const canvas = document.createElement('canvas');
            const video = document.querySelector('#screenStream video');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            
            const link = document.createElement('a');
            link.download = `screen-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();
            
            addLog('–°–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
        }
        
        // –ó–∞–ø–∏—Å—å –≤–∏–¥–µ–æ
        function recordWebcam() {
            if (!webcamStream) {
                addLog('–í–µ–±-–∫–∞–º–µ—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏');
                return;
            }
            
            mediaRecorder = new MediaRecorder(webcamStream);
            recordedChunks = [];
            
            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) {
                    recordedChunks.push(event.data);
                }
            };
            
            mediaRecorder.onstop = () => {
                const blob = new Blob(recordedChunks, { type: 'video/webm' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.download = `webcam-recording-${Date.now()}.webm`;
                link.href = url;
                link.click();
                addLog('–ó–∞–ø–∏—Å—å —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
            };
            
            mediaRecorder.start();
            addLog('–ó–∞–ø–∏—Å—å —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã –Ω–∞—á–∞—Ç–∞');
        }
        
        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞
        function stopWebcam() {
            if (webcamStream) {
                webcamStream.getTracks().forEach(track => track.stop());
                webcamStream = null;
                document.getElementById('webcamStream').innerHTML = '<div class="connecting">üîÑ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –í–ï–ë-–ö–ê–ú–ï–†–ï...</div>';
                addLog('–í–µ–±-–∫–∞–º–µ—Ä–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
            }
            
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                mediaRecorder.stop();
            }
        }
        
        function stopScreenShare() {
            if (screenStream) {
                screenStream.getTracks().forEach(track => track.stop());
                screenStream = null;
                document.getElementById('screenStream').innerHTML = '<div class="connecting">üîÑ –ó–ê–•–í–ê–¢ –≠–ö–†–ê–ù–ê...</div>';
                addLog('–ó–∞—Ö–≤–∞—Ç —ç–∫—Ä–∞–Ω–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
            }
        }
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function toggleWebcamLight() {
            addLog('–í–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –∫–∞–º–µ—Ä—ã...');
            // –ò–º–∏—Ç–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∏—è LED –∫–∞–º–µ—Ä—ã
        }
        
        function takeSecretPhoto() {
            addLog('–°–∫—Ä—ã—Ç—ã–π —Å–Ω–∏–º–æ–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω...');
            // –°–∫—Ä—ã—Ç—ã–π –∑–∞—Ö–≤–∞—Ç –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ü–∏–∏
        }
        
        function disableWebcam() {
            addLog('–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ...');
            // –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ –∫–∞–º–µ—Ä—ã
        }
        
        // –ò–º–∏—Ç–∞—Ü–∏—è —Å—Ç—Ä–∏–º–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
        function simulateStreaming() {
            setInterval(() => {
                if (!webcamStream) {
                    const status = document.querySelector('#webcamStream .connecting');
                    if (status) {
                        status.textContent = 'üîÑ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –í–ï–ë-–ö–ê–ú–ï–†–ï... ' + new Date().getSeconds();
                    }
                }
                
                if (!screenStream) {
                    const status = document.querySelector('#screenStream .connecting');
                    if (status) {
                        status.textContent = 'üîÑ –ó–ê–•–í–ê–¢ –≠–ö–†–ê–ù–ê... ' + new Date().getSeconds();
                    }
                }
            }, 1000);
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        addLog('–°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        simulateStreaming();
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        // setTimeout(startWebcam, 1000);
        // setTimeout(startScreenShare, 2000);
    </script>
</body>
</html>